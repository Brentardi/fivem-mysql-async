<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>mysql-async Documentation - mysql-async Documentation</title><meta name="gridsome:hash" content="eaa7522ecda7f721968d9341458285cb5f98a8b1"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.18"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><link data-vue-tag="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,400;0,500;0,700;1,400&amp;display=swap"><link rel="preload" href="/fivem-mysql-async/assets/css/6.styles.bcb3b6c4.css" as="style"><link rel="preload" href="/fivem-mysql-async/assets/js/app.73a24a55.js" as="script"><link rel="preload" href="/fivem-mysql-async/assets/js/page--src-pages-queries-vue.351a9205.js" as="script"><link rel="prefetch" href="/fivem-mysql-async/assets/js/page--node-modules-gridsome-app-pages-404-vue.0684d5d5.js"><link rel="prefetch" href="/fivem-mysql-async/assets/js/page--src-pages-config-vue.90539e1a.js"><link rel="prefetch" href="/fivem-mysql-async/assets/js/page--src-pages-gui-vue.249587a7.js"><link rel="prefetch" href="/fivem-mysql-async/assets/js/page--src-pages-index-vue.b1bbba09.js"><link rel="prefetch" href="/fivem-mysql-async/assets/js/vendors~page--src-pages-index-vue.9f47c847.js"><link rel="stylesheet" href="/fivem-mysql-async/assets/css/6.styles.bcb3b6c4.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="layout"><nav class="navbar navbar-dark bg-primary fixed-top navbar-expand-md"><div class="navbar-brand">mysql-async</div><button type="button" aria-label="Toggle navigation" class="navbar-toggler"><span class="navbar-toggler-icon"></span></button><div id="navbarSupportedContent" class="navbar-collapse collapse" style="display:none;"><ul class="navbar-nav mr-auto"><a href="/fivem-mysql-async/" class="nav-link active">Quick Setup</a><a href="/fivem-mysql-async/config/" class="nav-link">Config</a><a href="/fivem-mysql-async/queries/" aria-current="page" class="nav-link active--exact active">Querying</a><a href="/fivem-mysql-async/gui/" class="nav-link">GUI &amp; Dev</a></ul></div></nav><main class="container-md mt-2 bg-light" style="padding-top: 56px;"><div><div><h2 id="queries"><a href="#queries" aria-hidden="true"><span class="icon icon-link"></span></a>Queries</h2>
<p> All query types in mysql-async can be fired using either <em>Sync</em> or <em>Async</em> methods, which can be retrieved from the MySQL object. The last parameter of an Async function is always the callback, the argument of the callback gets returned by <em>Sync</em> functions.</p>
<p>Contrary to older <em>Sync</em> implementations, these functions are safe to use, since they are non-blocking and just wrappers around the <em>Async</em> calls. But for a possible migration to other Database implementations, the use of the Sync functions should be discouraged.</p>
<h3 id="mysqlready"><a href="#mysqlready" aria-hidden="true"><span class="icon icon-link"></span></a>MySQL.ready</h3>
<p>You need to encapsulate your code into <code>MySQL.ready</code> to be sure that the mod will be available and initialized before your first request. In subsequent examples the <code>MySQL.ready</code> function will not be shown, and it is expected that the code is encapsulated.</p>
<pre class="language-lua"><code class="language-lua">MySQL<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">print</span><span class="token punctuation">(</span>MySQL<span class="token punctuation">.</span>Sync<span class="token punctuation">.</span><span class="token function">fetchScalar</span><span class="token punctuation">(</span><span class="token string">'SELECT @parameters'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token string">'@parameters'</span><span class="token punctuation">]</span> <span class="token operator">=</span>  <span class="token string">'string'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>
<span class="token comment">--[[
prints:

string
]]</span><span class="token comment">--</span></code></pre>
<h3 id="execute"><a href="#execute" aria-hidden="true"><span class="icon icon-link"></span></a>execute</h3>
<p>Execute a mysql query which should not send any result (like a Insert / Delete / Update), and will return the number of affected rows. </p>
<pre class="language-lua"><code class="language-lua">MySQL<span class="token punctuation">.</span>Async<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">'INSERT INTO users_log (x, y, z, playerId) VALUES (@x, @y, @z, @id)'</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pos<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pos<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'z'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pos<span class="token punctuation">.</span>z<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span> <span class="token operator">=</span> player<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span>affectedRows<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>affectedRows<span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token punctuation">)</span>
<span class="token comment">--[[
prints:

1
]]</span><span class="token comment">--</span></code></pre>
<h3 id="fetchall"><a href="#fetchall" aria-hidden="true"><span class="icon icon-link"></span></a>fetchAll</h3>
<p>Fetch results from MySQL and returns them in the form of an Array of Objects: </p>
<pre class="language-lua"><code class="language-lua">MySQL<span class="token punctuation">.</span>Async<span class="token punctuation">.</span><span class="token function">fetchAll</span><span class="token punctuation">(</span><span class="token string">'SELECT * FROM users WHERE id = @id'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token string">'@id'</span><span class="token punctuation">]</span> <span class="token operator">=</span> playerId <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
  <span class="token function">print</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>
<span class="token comment">--[[
prints:

[{
  "id": 95585726093402110,
  "cash": 0,
  "bank": 0,
  "skin": "{}",
  "online": true,
  "lastSeen": 1590656804000
}]
]]</span><span class="token comment">--</span></code></pre>
<h3 id="fetchscalar"><a href="#fetchscalar" aria-hidden="true"><span class="icon icon-link"></span></a>fetchScalar</h3>
<p>Fetch the first field of the first row in a query:</p>
<pre class="language-lua"><code class="language-lua">MySQL<span class="token punctuation">.</span>Async<span class="token punctuation">.</span><span class="token function">fetchScalar</span><span class="token punctuation">(</span><span class="token string">'SELECT COUNT(1) FROM users'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
  <span class="token function">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>
<span class="token comment">--[[
prints:

15
]]</span><span class="token comment">--</span></code></pre>
<h3 id="insert"><a href="#insert" aria-hidden="true"><span class="icon icon-link"></span></a>insert</h3>
<p>Returns the last insert id of the inserted item. Needs an auto-incremented primary key to work. </p>
<pre class="language-lua"><code class="language-lua">MySQL<span class="token punctuation">.</span>Async<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">'INSERT INTO users_log (x, y, z, playerId) VALUES (@x, @y, @z, @id)'</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pos<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pos<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'z'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pos<span class="token punctuation">.</span>z<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span> <span class="token operator">=</span> player<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span>insertId<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>insertId<span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token punctuation">)</span>
<span class="token comment">--[[
prints:

1137
]]</span><span class="token comment">--</span></code></pre>
<h3 id="store"><a href="#store" aria-hidden="true"><span class="icon icon-link"></span></a>store</h3>
<p>The store export should be used for storing query strings, when a lot of queries are expected to be triggered at once. The idea behind this feature is, that while recieving data puts stress on your server infrastructure, so does sending data. And the biggest polluter for this resource is sending overly long and complicated query strings.</p>
<p>While the server is running you want to minimize the impact of sending a lot of queries at once puts on your architecture, thus you can already store these queries ahead of time, and just pass the id returned by the callback function and pass the parameters for these queries along.</p>
<pre class="language-lua"><code class="language-lua">insertUserLog <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
MySQL<span class="token punctuation">.</span>Async<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token string">"INSERT INTO users_log SET ?"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>storeId<span class="token punctuation">)</span> insertUserLog <span class="token operator">=</span> storeId <span class="token keyword">end</span><span class="token punctuation">)</span>
<span class="token comment">-- ...</span>
MySQL<span class="token punctuation">.</span>Async<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>insertUserLog<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pos<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pos<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'z'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pos<span class="token punctuation">.</span>z<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'playerId'</span><span class="token punctuation">]</span> <span class="token operator">=</span> player<span class="token punctuation">.</span>id <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
  <span class="token function">print</span><span class="token punctuation">(</span>insertId<span class="token punctuation">)</span>
<span class="token keyword">end</span><span class="token punctuation">)</span></code></pre>
<p>This works like the example above, but the query string does not need to be reset and is a bit more elegant in the writing.</p>
</div></div><div><div><h2 id="transactions"><a href="#transactions" aria-hidden="true"><span class="icon icon-link"></span></a>Transactions</h2>
<p> A transaction will only commit all queries to the database, if all queries to the database succeed. If one of them fails, no changes to the database will be made. This can be easily used when e.g. transfering money, making sure that the money field is positive. A transaction would fail if someone would attempt to have negative cash, so that no money would be transfered.</p>
<p>Since the transaction will either fail or succeed, the callback of the function will either answer with true or false depending on if the transaction succeeded. If it fails an error message will be printed, but it is an intended one, since the commit to the database would be likely unwanted.</p>
<p>The following example shows the same transaction being done twice in different ways. </p>
<pre class="language-lua"><code class="language-lua">MySQL<span class="token punctuation">.</span>Async<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">'UPDATE users SET cash = cash - @transfer WHERE id = @senderId'</span><span class="token punctuation">,</span>
    <span class="token string">'UPDATE users SET cash = cash + @transfer WHERE id = @recipientId'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token string">'transfer'</span><span class="token punctuation">]</span> <span class="token operator">=</span> amount<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'senderId'</span><span class="token punctuation">]</span> <span class="token operator">=</span> senderId<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'recipientId'</span><span class="token punctuation">]</span> <span class="token operator">=</span> recipientId <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token punctuation">)</span>
<span class="token comment">--[[
prints:

true or false, depending on if cash goes negative or not.
]]</span><span class="token comment">--</span></code></pre>
<pre class="language-lua"><code class="language-lua">MySQL<span class="token punctuation">.</span>Async<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      query <span class="token operator">=</span> <span class="token string">'UPDATE users SET cash = cash - @transfer WHERE id = @senderId'</span><span class="token punctuation">,</span>
      parameters <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token string">'transfer'</span><span class="token punctuation">]</span> <span class="token operator">=</span> amount<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'senderId'</span><span class="token punctuation">]</span> <span class="token operator">=</span> senderId <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      query <span class="token operator">=</span> <span class="token string">'UPDATE users SET cash = cash + @transfer WHERE id = @recipientId'</span><span class="token punctuation">,</span>
      parameters <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token string">'transfer'</span><span class="token punctuation">]</span> <span class="token operator">=</span> amount<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'recipientId'</span><span class="token punctuation">]</span> <span class="token operator">=</span> recipientId <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token punctuation">)</span>
<span class="token comment">--[[
prints:

true or false, depending on if cash goes negative or not.
]]</span><span class="token comment">--</span></code></pre>
</div></div></main></div>
    <script>window.__INITIAL_STATE__={"data":{"allWebPage":{"edges":[{"node":{"path":"\u002Fcontent\u002Fpages\u002Fqueries\u002F","content":"\u003Ch2 id=\"queries\"\u003E\u003Ca href=\"#queries\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EQueries\u003C\u002Fh2\u003E\n\u003Cp\u003E All query types in mysql-async can be fired using either \u003Cem\u003ESync\u003C\u002Fem\u003E or \u003Cem\u003EAsync\u003C\u002Fem\u003E methods, which can be retrieved from the MySQL object. The last parameter of an Async function is always the callback, the argument of the callback gets returned by \u003Cem\u003ESync\u003C\u002Fem\u003E functions.\u003C\u002Fp\u003E\n\u003Cp\u003EContrary to older \u003Cem\u003ESync\u003C\u002Fem\u003E implementations, these functions are safe to use, since they are non-blocking and just wrappers around the \u003Cem\u003EAsync\u003C\u002Fem\u003E calls. But for a possible migration to other Database implementations, the use of the Sync functions should be discouraged.\u003C\u002Fp\u003E\n\u003Ch3 id=\"mysqlready\"\u003E\u003Ca href=\"#mysqlready\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMySQL.ready\u003C\u002Fh3\u003E\n\u003Cp\u003EYou need to encapsulate your code into \u003Ccode\u003EMySQL.ready\u003C\u002Fcode\u003E to be sure that the mod will be available and initialized before your first request. In subsequent examples the \u003Ccode\u003EMySQL.ready\u003C\u002Fcode\u003E function will not be shown, and it is expected that the code is encapsulated.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-lua\"\u003E\u003Ccode class=\"language-lua\"\u003EMySQL\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eready\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EMySQL\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESync\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EfetchScalar\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'SELECT @parameters'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'@parameters'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E  \u003Cspan class=\"token string\"\u003E'string'\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E--[[\nprints:\n\nstring\n]]\u003C\u002Fspan\u003E\u003Cspan class=\"token comment\"\u003E--\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"execute\"\u003E\u003Ca href=\"#execute\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Eexecute\u003C\u002Fh3\u003E\n\u003Cp\u003EExecute a mysql query which should not send any result (like a Insert \u002F Delete \u002F Update), and will return the number of affected rows. \u003C\u002Fp\u003E\n\u003Cpre class=\"language-lua\"\u003E\u003Ccode class=\"language-lua\"\u003EMySQL\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EAsync\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eexecute\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'INSERT INTO users_log (x, y, z, playerId) VALUES (@x, @y, @z, @id)'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'x'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ex\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'y'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ey\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'z'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ez\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'id'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E player\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eid \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EaffectedRows\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EaffectedRows\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E--[[\nprints:\n\n1\n]]\u003C\u002Fspan\u003E\u003Cspan class=\"token comment\"\u003E--\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"fetchall\"\u003E\u003Ca href=\"#fetchall\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EfetchAll\u003C\u002Fh3\u003E\n\u003Cp\u003EFetch results from MySQL and returns them in the form of an Array of Objects: \u003C\u002Fp\u003E\n\u003Cpre class=\"language-lua\"\u003E\u003Ccode class=\"language-lua\"\u003EMySQL\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EAsync\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EfetchAll\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'SELECT * FROM users WHERE id = @id'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'@id'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E playerId \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eresult\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ejson\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eencode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eresult\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E--[[\nprints:\n\n[{\n  \"id\": 95585726093402110,\n  \"cash\": 0,\n  \"bank\": 0,\n  \"skin\": \"{}\",\n  \"online\": true,\n  \"lastSeen\": 1590656804000\n}]\n]]\u003C\u002Fspan\u003E\u003Cspan class=\"token comment\"\u003E--\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"fetchscalar\"\u003E\u003Ca href=\"#fetchscalar\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EfetchScalar\u003C\u002Fh3\u003E\n\u003Cp\u003EFetch the first field of the first row in a query:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-lua\"\u003E\u003Ccode class=\"language-lua\"\u003EMySQL\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EAsync\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EfetchScalar\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'SELECT COUNT(1) FROM users'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eresult\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eresult\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E--[[\nprints:\n\n15\n]]\u003C\u002Fspan\u003E\u003Cspan class=\"token comment\"\u003E--\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"insert\"\u003E\u003Ca href=\"#insert\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Einsert\u003C\u002Fh3\u003E\n\u003Cp\u003EReturns the last insert id of the inserted item. Needs an auto-incremented primary key to work. \u003C\u002Fp\u003E\n\u003Cpre class=\"language-lua\"\u003E\u003Ccode class=\"language-lua\"\u003EMySQL\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EAsync\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Einsert\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'INSERT INTO users_log (x, y, z, playerId) VALUES (@x, @y, @z, @id)'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'x'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ex\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'y'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ey\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'z'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ez\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'id'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E player\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eid \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EinsertId\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EinsertId\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E--[[\nprints:\n\n1137\n]]\u003C\u002Fspan\u003E\u003Cspan class=\"token comment\"\u003E--\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"store\"\u003E\u003Ca href=\"#store\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Estore\u003C\u002Fh3\u003E\n\u003Cp\u003EThe store export should be used for storing query strings, when a lot of queries are expected to be triggered at once. The idea behind this feature is, that while recieving data puts stress on your server infrastructure, so does sending data. And the biggest polluter for this resource is sending overly long and complicated query strings.\u003C\u002Fp\u003E\n\u003Cp\u003EWhile the server is running you want to minimize the impact of sending a lot of queries at once puts on your architecture, thus you can already store these queries ahead of time, and just pass the id returned by the callback function and pass the parameters for these queries along.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-lua\"\u003E\u003Ccode class=\"language-lua\"\u003EinsertUserLog \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\nMySQL\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EAsync\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estore\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"INSERT INTO users_log SET ?\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EstoreId\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E insertUserLog \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E storeId \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E-- ...\u003C\u002Fspan\u003E\nMySQL\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EAsync\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Einsert\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EinsertUserLog\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'x'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ex\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'y'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ey\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'z'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E pos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ez\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'playerId'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E player\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eid \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eresponse\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EinsertId\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThis works like the example above, but the query string does not need to be reset and is a bit more elegant in the writing.\u003C\u002Fp\u003E\n"}},{"node":{"path":"\u002Fcontent\u002Fpages\u002Ftransactions\u002F","content":"\u003Ch2 id=\"transactions\"\u003E\u003Ca href=\"#transactions\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ETransactions\u003C\u002Fh2\u003E\n\u003Cp\u003E A transaction will only commit all queries to the database, if all queries to the database succeed. If one of them fails, no changes to the database will be made. This can be easily used when e.g. transfering money, making sure that the money field is positive. A transaction would fail if someone would attempt to have negative cash, so that no money would be transfered.\u003C\u002Fp\u003E\n\u003Cp\u003ESince the transaction will either fail or succeed, the callback of the function will either answer with true or false depending on if the transaction succeeded. If it fails an error message will be printed, but it is an intended one, since the commit to the database would be likely unwanted.\u003C\u002Fp\u003E\n\u003Cp\u003EThe following example shows the same transaction being done twice in different ways. \u003C\u002Fp\u003E\n\u003Cpre class=\"language-lua\"\u003E\u003Ccode class=\"language-lua\"\u003EMySQL\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EAsync\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Etransaction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string\"\u003E'UPDATE users SET cash = cash - @transfer WHERE id = @senderId'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string\"\u003E'UPDATE users SET cash = cash + @transfer WHERE id = @recipientId'\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'transfer'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E amount\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'senderId'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E senderId\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'recipientId'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E recipientId \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esuccess\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esuccess\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E--[[\nprints:\n\ntrue or false, depending on if cash goes negative or not.\n]]\u003C\u002Fspan\u003E\u003Cspan class=\"token comment\"\u003E--\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cpre class=\"language-lua\"\u003E\u003Ccode class=\"language-lua\"\u003EMySQL\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EAsync\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Etransaction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      query \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'UPDATE users SET cash = cash - @transfer WHERE id = @senderId'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n      parameters \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'transfer'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E amount\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'senderId'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E senderId \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      query \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'UPDATE users SET cash = cash + @transfer WHERE id = @recipientId'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n      parameters \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'transfer'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E amount\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'recipientId'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E recipientId \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esuccess\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003Eprint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esuccess\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eend\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E--[[\nprints:\n\ntrue or false, depending on if cash goes negative or not.\n]]\u003C\u002Fspan\u003E\u003Cspan class=\"token comment\"\u003E--\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n"}}]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/fivem-mysql-async/assets/js/app.73a24a55.js" defer></script><script src="/fivem-mysql-async/assets/js/page--src-pages-queries-vue.351a9205.js" defer></script>
  </body>
</html>
